<!DOCTYPE html>
<html>

<head>
  <title>Chatbox</title>
</head>

<body>
  <h1>Chat</h1>
  <textarea id="output-text" rows="10" disabled readonly></textarea>
  <textarea id="input-text" rows="2" autofocus onkeypress="submit_chat(event)"></textarea>

  <script>
    let socket = new WebSocket("wss://" + document.location.host + "/chatws");
    let out = document.getElementById("output-text");

    socket.onmessage = (event) => {
      out.value += event.data;      
    }
    
    function submit_chat(event) {
      if (event.keyCode == 13 && !event.shiftKey) {

        //Stops enter from creating a new line 
        event.preventDefault();
        socket.send(event.target.value + "\n")
        return true;
      }
    } 
  </script>
</body>

</html>